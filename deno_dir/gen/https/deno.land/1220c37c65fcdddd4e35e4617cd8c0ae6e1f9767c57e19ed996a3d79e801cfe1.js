import { difference, removeEmptyValues } from "./util.ts";
export function parse(rawDotenv) {
    const env = {};
    for (const line of rawDotenv.split("\n")){
        if (!isVariableStart(line)) continue;
        const key = line.slice(0, line.indexOf("=")).trim();
        let value = line.slice(line.indexOf("=") + 1).trim();
        if (hasSingleQuotes(value)) {
            value = value.slice(1, -1);
        } else if (hasDoubleQuotes(value)) {
            value = value.slice(1, -1);
            value = expandNewlines(value);
        } else value = value.trim();
        env[key] = value;
    }
    return env;
}
const defaultConfigOptions = {
    path: `.env`,
    export: false,
    safe: false,
    example: `.env.example`,
    allowEmptyValues: false,
    defaults: `.env.defaults`
};
export function config(options = {}) {
    const o = {
        ...defaultConfigOptions,
        ...options
    };
    const conf = parseFile(o.path);
    if (o.defaults) {
        const confDefaults = parseFile(o.defaults);
        for(const key in confDefaults){
            if (!(key in conf)) {
                conf[key] = confDefaults[key];
            }
        }
    }
    if (o.safe) {
        const confExample = parseFile(o.example);
        assertSafe(conf, confExample, o.allowEmptyValues);
    }
    if (o.export) {
        for(const key1 in conf){
            if (Deno.env.get(key1) !== undefined) continue;
            Deno.env.set(key1, conf[key1]);
        }
    }
    return conf;
}
export async function configAsync(options = {}) {
    const o = {
        ...defaultConfigOptions,
        ...options
    };
    const conf = await parseFileAsync(o.path);
    if (o.defaults) {
        const confDefaults = await parseFileAsync(o.defaults);
        for(const key in confDefaults){
            if (!(key in conf)) {
                conf[key] = confDefaults[key];
            }
        }
    }
    if (o.safe) {
        const confExample = await parseFileAsync(o.example);
        assertSafe(conf, confExample, o.allowEmptyValues);
    }
    if (o.export) {
        for(const key1 in conf){
            if (Deno.env.get(key1) !== undefined) continue;
            Deno.env.set(key1, conf[key1]);
        }
    }
    return conf;
}
function parseFile(filepath) {
    try {
        return parse(new TextDecoder("utf-8").decode(Deno.readFileSync(filepath)));
    } catch (e) {
        if (e instanceof Deno.errors.NotFound) return {};
        throw e;
    }
}
async function parseFileAsync(filepath) {
    try {
        return parse(new TextDecoder("utf-8").decode(await Deno.readFile(filepath)));
    } catch (e) {
        if (e instanceof Deno.errors.NotFound) return {};
        throw e;
    }
}
function isVariableStart(str) {
    return /^\s*[a-zA-Z_][a-zA-Z_0-9 ]*\s*=/.test(str);
}
function hasSingleQuotes(str) {
    return /^'([\s\S]*)'$/.test(str);
}
function hasDoubleQuotes(str) {
    return /^"([\s\S]*)"$/.test(str);
}
function expandNewlines(str) {
    return str.replaceAll("\\n", "\n");
}
function assertSafe(conf, confExample, allowEmptyValues) {
    const currentEnv = Deno.env.toObject();
    // Not all the variables have to be defined in .env, they can be supplied externally
    const confWithEnv = Object.assign({}, currentEnv, conf);
    const missing = difference(Object.keys(confExample), // If allowEmptyValues is false, filter out empty values from configuration
    Object.keys(allowEmptyValues ? confWithEnv : removeEmptyValues(confWithEnv)));
    if (missing.length > 0) {
        const errorMessages = [
            `The following variables were defined in the example file but are not present in the environment:\n  ${missing.join(", ")}`,
            `Make sure to add them to your env file.`,
            !allowEmptyValues && `If you expect any of these variables to be empty, you can set the allowEmptyValues option to true.`, 
        ];
        throw new MissingEnvVarsError(errorMessages.filter(Boolean).join("\n\n"));
    }
}
export class MissingEnvVarsError extends Error {
    constructor(message){
        super(message);
        this.name = "MissingEnvVarsError";
        Object.setPrototypeOf(this, new.target.prototype);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvZG90ZW52QHYzLjEuMC9tb2QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGlmZmVyZW5jZSwgcmVtb3ZlRW1wdHlWYWx1ZXMgfSBmcm9tIFwiLi91dGlsLnRzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRG90ZW52Q29uZmlnIHtcbiAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ09wdGlvbnMge1xuICBwYXRoPzogc3RyaW5nO1xuICBleHBvcnQ/OiBib29sZWFuO1xuICBzYWZlPzogYm9vbGVhbjtcbiAgZXhhbXBsZT86IHN0cmluZztcbiAgYWxsb3dFbXB0eVZhbHVlcz86IGJvb2xlYW47XG4gIGRlZmF1bHRzPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2UocmF3RG90ZW52OiBzdHJpbmcpOiBEb3RlbnZDb25maWcge1xuICBjb25zdCBlbnY6IERvdGVudkNvbmZpZyA9IHt9O1xuXG4gIGZvciAoY29uc3QgbGluZSBvZiByYXdEb3RlbnYuc3BsaXQoXCJcXG5cIikpIHtcbiAgICBpZiAoIWlzVmFyaWFibGVTdGFydChsaW5lKSkgY29udGludWU7XG4gICAgY29uc3Qga2V5ID0gbGluZS5zbGljZSgwLCBsaW5lLmluZGV4T2YoXCI9XCIpKS50cmltKCk7XG4gICAgbGV0IHZhbHVlID0gbGluZS5zbGljZShsaW5lLmluZGV4T2YoXCI9XCIpICsgMSkudHJpbSgpO1xuICAgIGlmIChoYXNTaW5nbGVRdW90ZXModmFsdWUpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDEsIC0xKTtcbiAgICB9IGVsc2UgaWYgKGhhc0RvdWJsZVF1b3Rlcyh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSwgLTEpO1xuICAgICAgdmFsdWUgPSBleHBhbmROZXdsaW5lcyh2YWx1ZSk7XG4gICAgfSBlbHNlIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgIGVudltrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gZW52O1xufVxuXG5jb25zdCBkZWZhdWx0Q29uZmlnT3B0aW9ucyA9IHtcbiAgcGF0aDogYC5lbnZgLFxuICBleHBvcnQ6IGZhbHNlLFxuICBzYWZlOiBmYWxzZSxcbiAgZXhhbXBsZTogYC5lbnYuZXhhbXBsZWAsXG4gIGFsbG93RW1wdHlWYWx1ZXM6IGZhbHNlLFxuICBkZWZhdWx0czogYC5lbnYuZGVmYXVsdHNgLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZyhvcHRpb25zOiBDb25maWdPcHRpb25zID0ge30pOiBEb3RlbnZDb25maWcge1xuICBjb25zdCBvOiBSZXF1aXJlZDxDb25maWdPcHRpb25zPiA9IHsgLi4uZGVmYXVsdENvbmZpZ09wdGlvbnMsIC4uLm9wdGlvbnMgfTtcblxuICBjb25zdCBjb25mID0gcGFyc2VGaWxlKG8ucGF0aCk7XG5cbiAgaWYgKG8uZGVmYXVsdHMpIHtcbiAgICBjb25zdCBjb25mRGVmYXVsdHMgPSBwYXJzZUZpbGUoby5kZWZhdWx0cyk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gY29uZkRlZmF1bHRzKSB7XG4gICAgICBpZiAoIShrZXkgaW4gY29uZikpIHtcbiAgICAgICAgY29uZltrZXldID0gY29uZkRlZmF1bHRzW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKG8uc2FmZSkge1xuICAgIGNvbnN0IGNvbmZFeGFtcGxlID0gcGFyc2VGaWxlKG8uZXhhbXBsZSk7XG4gICAgYXNzZXJ0U2FmZShjb25mLCBjb25mRXhhbXBsZSwgby5hbGxvd0VtcHR5VmFsdWVzKTtcbiAgfVxuXG4gIGlmIChvLmV4cG9ydCkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGNvbmYpIHtcbiAgICAgIGlmIChEZW5vLmVudi5nZXQoa2V5KSAhPT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICAgIERlbm8uZW52LnNldChrZXksIGNvbmZba2V5XSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvbmY7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maWdBc3luYyhcbiAgb3B0aW9uczogQ29uZmlnT3B0aW9ucyA9IHt9LFxuKTogUHJvbWlzZTxEb3RlbnZDb25maWc+IHtcbiAgY29uc3QgbzogUmVxdWlyZWQ8Q29uZmlnT3B0aW9ucz4gPSB7IC4uLmRlZmF1bHRDb25maWdPcHRpb25zLCAuLi5vcHRpb25zIH07XG5cbiAgY29uc3QgY29uZiA9IGF3YWl0IHBhcnNlRmlsZUFzeW5jKG8ucGF0aCk7XG5cbiAgaWYgKG8uZGVmYXVsdHMpIHtcbiAgICBjb25zdCBjb25mRGVmYXVsdHMgPSBhd2FpdCBwYXJzZUZpbGVBc3luYyhvLmRlZmF1bHRzKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBjb25mRGVmYXVsdHMpIHtcbiAgICAgIGlmICghKGtleSBpbiBjb25mKSkge1xuICAgICAgICBjb25mW2tleV0gPSBjb25mRGVmYXVsdHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoby5zYWZlKSB7XG4gICAgY29uc3QgY29uZkV4YW1wbGUgPSBhd2FpdCBwYXJzZUZpbGVBc3luYyhvLmV4YW1wbGUpO1xuICAgIGFzc2VydFNhZmUoY29uZiwgY29uZkV4YW1wbGUsIG8uYWxsb3dFbXB0eVZhbHVlcyk7XG4gIH1cblxuICBpZiAoby5leHBvcnQpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBjb25mKSB7XG4gICAgICBpZiAoRGVuby5lbnYuZ2V0KGtleSkgIT09IHVuZGVmaW5lZCkgY29udGludWU7XG4gICAgICBEZW5vLmVudi5zZXQoa2V5LCBjb25mW2tleV0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjb25mO1xufVxuXG5mdW5jdGlvbiBwYXJzZUZpbGUoZmlsZXBhdGg6IHN0cmluZykge1xuICB0cnkge1xuICAgIHJldHVybiBwYXJzZShuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKS5kZWNvZGUoRGVuby5yZWFkRmlsZVN5bmMoZmlsZXBhdGgpKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIERlbm8uZXJyb3JzLk5vdEZvdW5kKSByZXR1cm4ge307XG4gICAgdGhyb3cgZTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBwYXJzZUZpbGVBc3luYyhmaWxlcGF0aDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBhcnNlKFxuICAgICAgbmV3IFRleHREZWNvZGVyKFwidXRmLThcIikuZGVjb2RlKGF3YWl0IERlbm8ucmVhZEZpbGUoZmlsZXBhdGgpKSxcbiAgICApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBEZW5vLmVycm9ycy5Ob3RGb3VuZCkgcmV0dXJuIHt9O1xuICAgIHRocm93IGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNWYXJpYWJsZVN0YXJ0KHN0cjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiAvXlxccypbYS16QS1aX11bYS16QS1aXzAtOSBdKlxccyo9Ly50ZXN0KHN0cik7XG59XG5cbmZ1bmN0aW9uIGhhc1NpbmdsZVF1b3RlcyhzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gL14nKFtcXHNcXFNdKiknJC8udGVzdChzdHIpO1xufVxuXG5mdW5jdGlvbiBoYXNEb3VibGVRdW90ZXMoc3RyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIC9eXCIoW1xcc1xcU10qKVwiJC8udGVzdChzdHIpO1xufVxuXG5mdW5jdGlvbiBleHBhbmROZXdsaW5lcyhzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIucmVwbGFjZUFsbChcIlxcXFxuXCIsIFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiBhc3NlcnRTYWZlKFxuICBjb25mOiBEb3RlbnZDb25maWcsXG4gIGNvbmZFeGFtcGxlOiBEb3RlbnZDb25maWcsXG4gIGFsbG93RW1wdHlWYWx1ZXM6IGJvb2xlYW4sXG4pIHtcbiAgY29uc3QgY3VycmVudEVudiA9IERlbm8uZW52LnRvT2JqZWN0KCk7XG5cbiAgLy8gTm90IGFsbCB0aGUgdmFyaWFibGVzIGhhdmUgdG8gYmUgZGVmaW5lZCBpbiAuZW52LCB0aGV5IGNhbiBiZSBzdXBwbGllZCBleHRlcm5hbGx5XG4gIGNvbnN0IGNvbmZXaXRoRW52ID0gT2JqZWN0LmFzc2lnbih7fSwgY3VycmVudEVudiwgY29uZik7XG5cbiAgY29uc3QgbWlzc2luZyA9IGRpZmZlcmVuY2UoXG4gICAgT2JqZWN0LmtleXMoY29uZkV4YW1wbGUpLFxuICAgIC8vIElmIGFsbG93RW1wdHlWYWx1ZXMgaXMgZmFsc2UsIGZpbHRlciBvdXQgZW1wdHkgdmFsdWVzIGZyb20gY29uZmlndXJhdGlvblxuICAgIE9iamVjdC5rZXlzKFxuICAgICAgYWxsb3dFbXB0eVZhbHVlcyA/IGNvbmZXaXRoRW52IDogcmVtb3ZlRW1wdHlWYWx1ZXMoY29uZldpdGhFbnYpLFxuICAgICksXG4gICk7XG5cbiAgaWYgKG1pc3NpbmcubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZXMgPSBbXG4gICAgICBgVGhlIGZvbGxvd2luZyB2YXJpYWJsZXMgd2VyZSBkZWZpbmVkIGluIHRoZSBleGFtcGxlIGZpbGUgYnV0IGFyZSBub3QgcHJlc2VudCBpbiB0aGUgZW52aXJvbm1lbnQ6XFxuICAke1xuICAgICAgICBtaXNzaW5nLmpvaW4oXG4gICAgICAgICAgXCIsIFwiLFxuICAgICAgICApXG4gICAgICB9YCxcbiAgICAgIGBNYWtlIHN1cmUgdG8gYWRkIHRoZW0gdG8geW91ciBlbnYgZmlsZS5gLFxuICAgICAgIWFsbG93RW1wdHlWYWx1ZXMgJiZcbiAgICAgIGBJZiB5b3UgZXhwZWN0IGFueSBvZiB0aGVzZSB2YXJpYWJsZXMgdG8gYmUgZW1wdHksIHlvdSBjYW4gc2V0IHRoZSBhbGxvd0VtcHR5VmFsdWVzIG9wdGlvbiB0byB0cnVlLmAsXG4gICAgXTtcblxuICAgIHRocm93IG5ldyBNaXNzaW5nRW52VmFyc0Vycm9yKGVycm9yTWVzc2FnZXMuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCJcXG5cXG5cIikpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNaXNzaW5nRW52VmFyc0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJNaXNzaW5nRW52VmFyc0Vycm9yXCI7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFNBQVMsVUFBVSxFQUFFLGlCQUFpQixRQUFRLFdBQVcsQ0FBQztBQWUxRCxPQUFPLFNBQVMsS0FBSyxDQUFDLFNBQWlCLEVBQWdCO0lBQ3JELE1BQU0sR0FBRyxHQUFpQixFQUFFLEFBQUM7SUFFN0IsS0FBSyxNQUFNLElBQUksSUFBSSxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFFO1FBQ3hDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEVBQUUsU0FBUztRQUNyQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEFBQUM7UUFDcEQsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxBQUFDO1FBQ3JELElBQUksZUFBZSxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzFCLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzVCLE1BQU0sSUFBSSxlQUFlLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDakMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFF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