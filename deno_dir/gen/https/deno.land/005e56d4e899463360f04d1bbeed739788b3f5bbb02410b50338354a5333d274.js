import { getReporter } from "./report.ts";
export async function hasPermissionSlient(permission) {
    const permissionState = await Deno.permissions.query(permission);
    const is = permissionState.state === "granted";
    if (!is) {
        const reporter = await getReporter("permission", false);
        reporter.debug(`--allow-${permission.name} flag now set, skip ${permission.name} permission`);
        return false;
    } else {
        return true;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvZGVub2Zsb3dAMC4wLjMzL2NvcmUvcGVybWlzc2lvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRSZXBvcnRlciB9IGZyb20gXCIuL3JlcG9ydC50c1wiO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc1Blcm1pc3Npb25TbGllbnQoXG4gIHBlcm1pc3Npb246IERlbm8uUGVybWlzc2lvbkRlc2NyaXB0b3IsXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgcGVybWlzc2lvblN0YXRlID0gYXdhaXQgRGVuby5wZXJtaXNzaW9ucy5xdWVyeShwZXJtaXNzaW9uKTtcbiAgY29uc3QgaXMgPSBwZXJtaXNzaW9uU3RhdGUuc3RhdGUgPT09IFwiZ3JhbnRlZFwiO1xuICBpZiAoIWlzKSB7XG4gICAgY29uc3QgcmVwb3J0ZXIgPSBhd2FpdCBnZXRSZXBvcnRlcihcInBlcm1pc3Npb25cIiwgZmFsc2UpO1xuICAgIHJlcG9ydGVyLmRlYnVnKFxuICAgICAgYC0tYWxsb3ctJHtwZXJtaXNzaW9uLm5hbWV9IGZsYWcgbm93IHNldCwgc2tpcCAke3Blcm1pc3Npb24ubmFtZX0gcGVybWlzc2lvbmAsXG4gICAgKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxTQUFTLFdBQVcsUUFBUSxjQUFjO0FBQzFDLE9BQU8sZUFBZSxvQkFDcEIsVUFBcUMsRUFDbkI7SUFDbEIsTUFBTSxrQkFBa0IsTUFBTSxLQUFLLFdBQVcsQ0FBQyxLQUFLLENBQUM7SUFDckQsTUFBTSxLQUFLLGdCQUFnQixLQUFLLEtBQUs7SUFDckMsSUFBSSxDQUFDLElBQUk7UUFDUCxNQUFNLFdBQVcsTUFBTSxZQUFZLGNBQWMsS0FBSztRQUN0RCxTQUFTLEtBQUssQ0FDWixDQUFDLFFBQVEsRUFBRSxXQUFXLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxXQUFXLElBQUksQ0FBQyxXQUFXLENBQUM7UUFFL0UsT0FBTyxLQUFLO0lBQ2QsT0FBTztRQUNMLE9BQU8sSUFBSTtJQUNiLENBQUM7QUFDSCxDQUFDIn0=