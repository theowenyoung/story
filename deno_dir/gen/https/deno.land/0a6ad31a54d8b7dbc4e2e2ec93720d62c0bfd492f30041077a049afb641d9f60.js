import { Adapters } from "./adapter.ts";
import { JSONB } from "./jsonb.ts";
import { MemoryAdapter } from "./memory.ts";
function tryParseURL(q) {
    try {
        return new URL(q);
    } catch (e) {
        return;
    }
}
/** Simple and common Key-value storage interface for multiple Database backends. */ export class Keydb {
    adapter;
    awaitReady;
    namespace = "";
    // deno-lint-ignore no-explicit-any
    serialize = JSONB.stringify;
    // deno-lint-ignore no-explicit-any
    deserialize = JSONB.parse;
    ttl;
    constructor(adapter = new MemoryAdapter(), options){
        this.adapter = typeof adapter === "object" ? adapter : undefined;
        if (this.adapter === undefined && typeof adapter !== "object") {
            const proto = tryParseURL(adapter);
            if (!proto) throw new Error("Invalid Adapter Connection URI");
            const protocol = proto.protocol;
            const adp = Adapters.get(protocol.substr(0, protocol.length - 1));
            if (!adp) throw new Error(`Adapter not found for Protocol: ${protocol}`);
            const res = adp.init(proto);
            if (res instanceof Promise) {
                this.awaitReady = res.then((a)=>{
                    this.adapter = a;
                    this.awaitReady = undefined;
                    return a;
                });
            } else this.adapter = res;
        }
        this.namespace = options?.namespace ?? "";
        if (options?.serialize) this.serialize = options.serialize;
        if (options?.deserialize) this.deserialize = options.deserialize;
        if (options?.ttl) this.ttl = options.ttl;
    }
    /**
   * Get a Value by Key name.
   *
   * @param key Name of Key to get Value.
   */ // deno-lint-ignore no-explicit-any
    async get(key) {
        if (this.awaitReady) await this.awaitReady;
        await this.adapter?.deleteExpired(this.namespace);
        const val = await this.adapter?.get(key, this.namespace);
        if (val == undefined) return undefined;
        const res = this.deserialize(val.value);
        return res;
    }
    /**
   * Set a Key's Value.
   *
   * @param key Name of the Key to set.
   * @param value Value to set.
   */ // deno-lint-ignore no-explicit-any
    async set(key, value, ttl) {
        if (this.awaitReady) await this.awaitReady;
        const _ttl = ttl ?? this.ttl;
        value = {
            value,
            ttl: _ttl && typeof _ttl === "number" ? Date.now() + _ttl : undefined
        };
        await this.adapter?.set(key, this.serialize(value.value), this.namespace, value.ttl);
        return this;
    }
    /**
   * Delete a Key from Database.
   *
   * @param key Name of the Key to delete.
   */ async delete(key) {
        if (this.awaitReady) await this.awaitReady;
        return await this.adapter?.delete(key, this.namespace) ?? false;
    }
    /** Clear complete Database. */ async clear() {
        if (this.awaitReady) await this.awaitReady;
        await this.adapter?.clear(this.namespace);
        return this;
    }
    /** Get an Array of all Key Names. */ async keys() {
        if (this.awaitReady) await this.awaitReady;
        await this.adapter?.deleteExpired(this.namespace);
        const keys = await this.adapter?.keys(this.namespace) ?? [];
        return keys;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gva2V5ZGJAMS4wLjAva2V5ZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWRhcHRlciwgQWRhcHRlcnMgfSBmcm9tIFwiLi9hZGFwdGVyLnRzXCI7XHJcbmltcG9ydCB7IEpTT05CIH0gZnJvbSBcIi4vanNvbmIudHNcIjtcclxuaW1wb3J0IHsgTWVtb3J5QWRhcHRlciB9IGZyb20gXCIuL21lbW9yeS50c1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBLZXlkYk9wdGlvbnMge1xyXG4gIG5hbWVzcGFjZT86IHN0cmluZztcclxuICB0dGw/OiBudW1iZXI7XHJcbiAgLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcclxuICBzZXJpYWxpemU/OiAodmFsdWU6IGFueSkgPT4gc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gIC8vIGRlbm8tbGludC1pZ25vcmUgbm8tZXhwbGljaXQtYW55XHJcbiAgZGVzZXJpYWxpemU/OiAodmFsdWU6IHN0cmluZykgPT4gYW55O1xyXG59XHJcblxyXG5mdW5jdGlvbiB0cnlQYXJzZVVSTChxOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIG5ldyBVUkwocSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxufVxyXG5cclxuLyoqIFNpbXBsZSBhbmQgY29tbW9uIEtleS12YWx1ZSBzdG9yYWdlIGludGVyZmFjZSBmb3IgbXVsdGlwbGUgRGF0YWJhc2UgYmFja2VuZHMuICovXHJcbmV4cG9ydCBjbGFzcyBLZXlkYiB7XHJcbiAgYWRhcHRlcj86IEFkYXB0ZXI7XHJcbiAgYXdhaXRSZWFkeT86IFByb21pc2U8QWRhcHRlcj47XHJcbiAgbmFtZXNwYWNlID0gXCJcIjtcclxuICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxyXG4gIHNlcmlhbGl6ZTogKHZhbHVlOiBhbnkpID0+IHN0cmluZyB8IHVuZGVmaW5lZCA9IEpTT05CLnN0cmluZ2lmeTtcclxuICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxyXG4gIGRlc2VyaWFsaXplOiAodmFsdWU6IHN0cmluZykgPT4gYW55ID0gSlNPTkIucGFyc2U7XHJcbiAgdHRsPzogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGFkYXB0ZXI6IEFkYXB0ZXIgfCBzdHJpbmcgPSBuZXcgTWVtb3J5QWRhcHRlcigpLFxyXG4gICAgb3B0aW9ucz86IEtleWRiT3B0aW9uc1xyXG4gICkge1xyXG4gICAgdGhpcy5hZGFwdGVyID0gdHlwZW9mIGFkYXB0ZXIgPT09IFwib2JqZWN0XCIgPyBhZGFwdGVyIDogdW5kZWZpbmVkO1xyXG4gICAgaWYgKHRoaXMuYWRhcHRlciA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBhZGFwdGVyICE9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgIGNvbnN0IHByb3RvID0gdHJ5UGFyc2VVUkwoYWRhcHRlcik7XHJcbiAgICAgIGlmICghcHJvdG8pIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQWRhcHRlciBDb25uZWN0aW9uIFVSSVwiKTtcclxuICAgICAgY29uc3QgcHJvdG9jb2wgPSBwcm90by5wcm90b2NvbDtcclxuICAgICAgY29uc3QgYWRwID0gQWRhcHRlcnMuZ2V0KHByb3RvY29sLnN1YnN0cigwLCBwcm90b2NvbC5sZW5ndGggLSAxKSk7XHJcbiAgICAgIGlmICghYWRwKSB0aHJvdyBuZXcgRXJyb3IoYEFkYXB0ZXIgbm90IGZvdW5kIGZvciBQcm90b2NvbDogJHtwcm90b2NvbH1gKTtcclxuICAgICAgY29uc3QgcmVzID0gYWRwLmluaXQocHJvdG8pO1xyXG4gICAgICBpZiAocmVzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG4gICAgICAgIHRoaXMuYXdhaXRSZWFkeSA9IHJlcy50aGVuKChhKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmFkYXB0ZXIgPSBhO1xyXG4gICAgICAgICAgdGhpcy5hd2FpdFJlYWR5ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgcmV0dXJuIGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB0aGlzLmFkYXB0ZXIgPSByZXM7XHJcbiAgICB9XHJcbiAgICB0aGlzLm5hbWVzcGFjZSA9IG9wdGlvbnM/Lm5hbWVzcGFjZSA/PyBcIlwiO1xyXG4gICAgaWYgKG9wdGlvbnM/LnNlcmlhbGl6ZSkgdGhpcy5zZXJpYWxpemUgPSBvcHRpb25zLnNlcmlhbGl6ZTtcclxuICAgIGlmIChvcHRpb25zPy5kZXNlcmlhbGl6ZSkgdGhpcy5kZXNlcmlhbGl6ZSA9IG9wdGlvbnMuZGVzZXJpYWxpemU7XHJcbiAgICBpZiAob3B0aW9ucz8udHRsKSB0aGlzLnR0bCA9IG9wdGlvbnMudHRsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGEgVmFsdWUgYnkgS2V5IG5hbWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ga2V5IE5hbWUgb2YgS2V5IHRvIGdldCBWYWx1ZS5cclxuICAgKi9cclxuICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxyXG4gIGFzeW5jIGdldDxUID0gYW55PihrZXk6IHN0cmluZyk6IFByb21pc2U8VCB8IHVuZGVmaW5lZD4ge1xyXG4gICAgaWYgKHRoaXMuYXdhaXRSZWFkeSkgYXdhaXQgdGhpcy5hd2FpdFJlYWR5O1xyXG4gICAgYXdhaXQgdGhpcy5hZGFwdGVyPy5kZWxldGVFeHBpcmVkKHRoaXMubmFtZXNwYWNlKTtcclxuICAgIGNvbnN0IHZhbCA9IGF3YWl0IHRoaXMuYWRhcHRlcj8uZ2V0KGtleSwgdGhpcy5uYW1lc3BhY2UpO1xyXG4gICAgaWYgKHZhbCA9PSB1bmRlZmluZWQpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCByZXMgPSB0aGlzLmRlc2VyaWFsaXplKHZhbC52YWx1ZSk7XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IGEgS2V5J3MgVmFsdWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ga2V5IE5hbWUgb2YgdGhlIEtleSB0byBzZXQuXHJcbiAgICogQHBhcmFtIHZhbHVlIFZhbHVlIHRvIHNldC5cclxuICAgKi9cclxuICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxyXG4gIGFzeW5jIHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgdHRsPzogbnVtYmVyKTogUHJvbWlzZTx0aGlzPiB7XHJcbiAgICBpZiAodGhpcy5hd2FpdFJlYWR5KSBhd2FpdCB0aGlzLmF3YWl0UmVhZHk7XHJcbiAgICBjb25zdCBfdHRsID0gdHRsID8/IHRoaXMudHRsO1xyXG4gICAgdmFsdWUgPSB7XHJcbiAgICAgIHZhbHVlLFxyXG4gICAgICB0dGw6IF90dGwgJiYgdHlwZW9mIF90dGwgPT09IFwibnVtYmVyXCIgPyBEYXRlLm5vdygpICsgX3R0bCA6IHVuZGVmaW5lZCxcclxuICAgIH07XHJcbiAgICBhd2FpdCB0aGlzLmFkYXB0ZXI/LnNldChcclxuICAgICAga2V5LFxyXG4gICAgICB0aGlzLnNlcmlhbGl6ZSh2YWx1ZS52YWx1ZSksXHJcbiAgICAgIHRoaXMubmFtZXNwYWNlLFxyXG4gICAgICB2YWx1ZS50dGxcclxuICAgICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZSBhIEtleSBmcm9tIERhdGFiYXNlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGtleSBOYW1lIG9mIHRoZSBLZXkgdG8gZGVsZXRlLlxyXG4gICAqL1xyXG4gIGFzeW5jIGRlbGV0ZShrZXk6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgaWYgKHRoaXMuYXdhaXRSZWFkeSkgYXdhaXQgdGhpcy5hd2FpdFJlYWR5O1xyXG4gICAgcmV0dXJuIChhd2FpdCB0aGlzLmFkYXB0ZXI/LmRlbGV0ZShrZXksIHRoaXMubmFtZXNwYWNlKSkgPz8gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKiogQ2xlYXIgY29tcGxldGUgRGF0YWJhc2UuICovXHJcbiAgYXN5bmMgY2xlYXIoKTogUHJvbWlzZTx0aGlzPiB7XHJcbiAgICBpZiAodGhpcy5hd2FpdFJlYWR5KSBhd2FpdCB0aGlzLmF3YWl0UmVhZHk7XHJcbiAgICBhd2FpdCB0aGlzLmFkYXB0ZXI/LmNsZWFyKHRoaXMubmFtZXNwYWNlKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLyoqIEdldCBhbiBBcnJheSBvZiBhbGwgS2V5IE5hbWVzLiAqL1xyXG4gIGFzeW5jIGtleXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgaWYgKHRoaXMuYXdhaXRSZWFkeSkgYXdhaXQgdGhpcy5hd2FpdFJlYWR5O1xyXG4gICAgYXdhaXQgdGhpcy5hZGFwdGVyPy5kZWxldGVFeHBpcmVkKHRoaXMubmFtZXNwYWNlKTtcclxuICAgIGNvbnN0IGtleXMgPSAoYXdhaXQgdGhpcy5hZGFwdGVyPy5rZXlzKHRoaXMubmFtZXNwYWNlKSkgPz8gW107XHJcbiAgICByZXR1cm4ga2V5cztcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFNBQWtCLFFBQVEsUUFBUSxjQUFjLENBQUM7QUFDakQsU0FBUyxLQUFLLFFBQVEsWUFBWSxDQUFDO0FBQ25DLFNBQVMsYUFBYSxRQUFRLGFBQWEsQ0FBQztBQVc1QyxTQUFTLFdBQVcsQ0FBQyxDQUFTLEVBQUU7SUFDOUIsSUFBSTtRQUNGLE9BQU8sSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDbkIsQ0FBQyxPQUFPLENBQUMsRUFBRTtRQUNWLE9BQU87S0FDUjtDQUNGO0FBRUQsb0ZBQW9GLENBQ3BGLE9BQU8sTUFBTSxLQUFLO0lBQ2hCLE9BQU8sQ0FBVztJQUNsQixVQUFVLENBQW9CO0lBQzlCLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFDZixtQ0FBbUM7SUFDbkMsU0FBUyxHQUF1QyxLQUFLLENBQUMsU0FBUyxDQUFDO0lBQ2hFLG1DQUFtQztJQUNuQyxX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